<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="import" href="wc/mulsemedia-box.html">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <title>Sensory Classroom</title>
</head>

<body>
	<header>
		<div class="row">
			<div class="col-xs-12">
				<h1>Your result is</h1>

				<h3 id="result"></h3>
				<hr>
				<h1>Details:</h1>
			</div>
		</div>
	</header><!-- /header -->

	<section>
		<div class="container">
			<!-- details -->
			<div class="row">
				<div id="box-here" class="col-xs-12">

					<ul class="list-group"><!-- Details Questions Fill dynamically --></ul>

					<!-- Box associada ao parent div -->
          

					<h1 id="performance"></h1>
				</div>
			</div>

			<!-- Buttons -->
			<div class="row">
			    <div class="col-xs-6 col-xs-offset-3">
			        <button type="button" class="btn btn-custom btn-block" onclick="location.href='index.html'">home</button>
			    </div>
			</div>
		</div>
	</section>

	 <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <p>Copyright &copy; Your App MulseMedia 2017</p>
                </div>
            </div>
        </div>
    </footer>
</body>
<script>
$(function () {

	var result = parseFloat(localStorage.getItem("result"));

	if (result)
		document.getElementById("result").innerHTML = result+'%';
	else
		document.getElementById("result").innerHTML = 'Try it!';

	var performance = document.getElementById("performance");
    var effectsHTML = "";
    var effects;
    var box = $('#box-here');

	if (result === 100){
		/*music*/
		/*start and pause after 15 seconds*/
        $(box).append("<audio id=\"audio\" src=\"audio/champion.mp3\" autoplay></audio>");
		setTimeout( function() {
		        document.getElementById('audio').pause();
		        document.getElementById('audio').currentTime = 0;
		    }, 15000 );
		/*effect*/
		effectsHTML =
			"<mulsemedia-box>\n"+
			"	<light-effect intensity='50.0' startTime='0' endTime='2'></light-effect>\n"+
			"	<vibration-effect intensity='35.0' startTime='0' endTime='2'></vibration-effect>\n"+
			"	<light-effect intensity='50.0' startTime='4' endTime='6'></light-effect>\n"+
			"	<vibration-effect intensity='35.0' startTime='4' endTime='6'></vibration-effect>\n"+
			"	<light-effect  intensity='50.0' startTime='8' endTime='10'></light-effect>\n"+
			"	<vibration-effect intensity='35.0' startTime='8' endTime='10'></vibration-effect>\n"+
			"	<light-effect intensity='50.0' startTime='12' endTime='14'></light-effect>\n"+
			"	<vibration-effect intensity='35.0' startTime='12' endTime='14'></vibration-effect>\n"+
			"</mulsemedia-box>";

        $(box).append(effectsHTML);

		effects = $('mulsemedia-box').children();

		effects.each(function () {
			/* Parametro: lista de tags efeitos com parent mulsemedia-box */
			runEffect(this);
		});

		performance.innerHTML = 'Congratulations! :D';
	}
	else if (result >= 70)
		performance.innerHTML = 'Nice! :)';
	else if (result < 70){
        $(box).append("<audio id=\"audio\" src=\"audio/raul.wav\" autoplay></audio>");

		effectsHTML =
			"<mulsemedia-box>\n"+
			"	<vibration-effect intensity='80.0' startTime='0' endTime='5'></vibration-effect>\n"+
			"	<fog-effect intensity='50.0' startTime='0' endTime='5'></fog-effect>\n"+
			"</mulsemedia-box>";

		$(box).append(effectsHTML);

		effects = $('mulsemedia-box').children();

		effects.each(function () {
			/* Parametro: tag effect com parent mulsemedia-box */
			runEffect(this);
		});

		performance.innerHTML = 'You Fail :(';
	}

	/*details of the questions*/
	var listQuestions = localStorage.getItem("questions");
	var list = JSON.parse(listQuestions);
	//console.log(list);
	for (var i = 0; i < list.length; i++) {
		var title = list[i].title;
		var isCorrect = list[i].answer;
		if(isCorrect){
			$("ul").append("<li class='list-group-item list-group-item-success'>"+title+" <br> <strong>Correct answer!</strong></li>");
		}
		else {
			$("ul").append("<li class='list-group-item list-group-item-danger'>"+title+" <br> <strong>Wrong Answer!</strong> </li>");
		}
	}
});

</script>
</html>
